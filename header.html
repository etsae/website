<nav class="navbar navbar-expand-lg fixed-top" id="mainNav" aria-label="Main Navigation">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="./" aria-label="Homepage">
            <span class="logo-text">ETS</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" 
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#services">Services</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#contact">Contact</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" 
                       data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">
                        Solutions
                        <span class="dropdown-indicator ms-1">
                            <i class="fas fa-chevron-down"></i>
                        </span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="industrial_commercial_refrigeration.html">Industrial and Commercial Refrigeration</a></li>
                        <li><a class="dropdown-item" href="water_pumps.html">Water Pumps</a></li>
                        <li><a class="dropdown-item" href="well_drilling.html">Well Drilling</a></li>
                        <li><a class="dropdown-item" href="pivots.html">Pivots</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- JavaScript for Dropdown and Navbar Scroll Effect -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Dropdown Closure on Item Click
        const dropdownItems = document.querySelectorAll('.dropdown-item');
        dropdownItems.forEach(function(item) {
            item.addEventListener('click', function() {
                var dropdown = item.closest('.dropdown');
                var bsDropdown = bootstrap.Dropdown.getInstance(dropdown.querySelector('.dropdown-toggle'));
                if (bsDropdown) {
                    bsDropdown.hide();
                }
            });
        });

        // Navbar Scroll Effect
        window.addEventListener('scroll', function() {
            var nav = document.getElementById('mainNav');
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Smooth scroll and offset for anchor links
        const anchorLinks = document.querySelectorAll('a[href^="#"]');
        anchorLinks.forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const headerOffset = 76; // Adjust this value based on your header height
                    const elementPosition = target.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: "smooth"
                    });
                }
            });
        });

        // Add hover effect to nav items
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.classList.add('nav-item-hover');
            });
            item.addEventListener('mouseleave', function() {
                this.classList.remove('nav-item-hover');
            });
        });

        // Animate logo on page load
        window.addEventListener('load', function() {
            const logo = document.querySelector('.logo-text');
            if (logo) {
                logo.classList.add('logo-animate');
            }
        });

        // Accessibility: Handle keyboard navigation for dropdowns
        const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
        dropdownToggles.forEach(toggle => {
            toggle.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    bootstrap.Dropdown.getOrCreateInstance(toggle).toggle();
                }
            });
        });
    });
</script>